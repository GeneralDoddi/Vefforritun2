<<<<<<< HEAD
var app=angular.module("ChatApp",["ngRoute","ui.bootstrap"]);app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"templates/home.html",controller:"LoginController"}).when("/room/:roomName",{templateUrl:"templates/room.html",controller:"RoomController"}).otherwise({redirectTo:"/"})}]),app.factory("SocketService",["$http",function(){var a,b="";return{setConnected:function(b){a=b},setUsername:function(a){b=a},getUsername:function(){return b},getSocket:function(){return a}}}]);var ModalInstanceCtrl=function(a,b,c){console.log(c),a.userList=c,a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}};app.controller("LoginController",["$scope","$location","SocketService",function(a,b,c){a.username="",a.message="";var d=io.connect("http://localhost:8080");a.connect=function(){d&&d.emit("adduser",a.username,function(e){e?(c.setConnected(d),c.setUsername(a.username),b.path("/room/lobby")):a.message="Your name is taken, please choose another name",a.$apply()})}}]),app.controller("RoomController",["$scope","$location","$routeParams","SocketService","$modal","$log",function(a,b,c,d,e,f){a.roomName=c.roomName,a.currentMessage="";var g=d.getSocket();g&&(g.emit("joinroom",{room:a.roomName,pass:""},function(){}),g.on("updatechat",function(b,c){console.log(c),a.messages=c,a.$apply()}),g.on("updateusers",function(b,c){b===a.roomName&&(a.users=c,a.$apply())})),a.createRoom=function(){console.log("create new room");var b=e.open({templateUrl:"templates/newRoomPartial.html",controller:"ModalInstanceCtrl",resolve:{userList:function(){return a.users}}});b.result.then(function(b){a.selected=b},function(){f.info("Modal dismissed at: "+new Date)})},a.joinRoom=function(){var b=e.open({templateUrl:"templates/joinRoomPartial.html",controller:"ModalInstanceCtrl",resolve:{userList:function(){return a.roomList}}});b.result.then(function(b){a.selected=b},function(){f.info("Modal dismissed at: "+new Date)})},a.send=function(){g&&(console.log("I sent a message to "+a.roomName+": "+a.currentMessage),g.emit("sendmsg",{roomName:a.roomName,msg:a.currentMessage}),a.currentMessage="")},a.disconnect=function(){g&&(b.path("/"),g.disconnect())},a.keyPress=function(b){console.log("$event"),13===b.keyCode&&a.send()}}]);
=======
var app=angular.module("ChatApp",["ngRoute"]);app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"templates/home.html",controller:"LoginController"}).when("/room/:roomName",{templateUrl:"templates/room.html",controller:"RoomController"}).otherwise({redirectTo:"/"})}]),app.factory("SocketService",["$http",function(){var a,b="",c=[];return{setConnected:function(b){a=b},setUsername:function(a){b=a},getUsername:function(){return b},getSocket:function(){return a},setRoom:function(a){c.push(a)},getRoom:function(){return c},partRoom:function(a){c.splice(c.indexOf(a),1)}}}]),app.controller("LoginController",["$scope","$location","SocketService",function(a,b,c){a.username="",a.message="",console.log("herro from login");var d=io.connect("http://localhost:8080");a.connect=function(){d&&d.emit("adduser",a.username,function(e){e?(c.setConnected(d),c.setUsername(a.username),b.path("/room/lobby")):a.message="Your name is taken, please choose another name",a.$apply()})}}]),app.controller("RoomController",["$scope","$location","$routeParams","SocketService",function(a,b,c,d){a.roomName=c.roomName,a.currentMessage="";var e=d.getSocket();e&&(e.emit("joinroom",{room:a.roomName,pass:""},function(){}),e.on("updatechat",function(b,c){console.log(c),a.messages=c,a.$apply()}),e.on("updateusers",function(b,c){b===a.roomName&&(a.users=c,a.$apply())})),a.send=function(){if(e){var b=a.currentMessage.split(" ");"/kick"===b[0]?console.log("homo"):"/op"===b[0]||"/ban"===b[0]||("/joinroom"===b[0]?(d.setRoom(b[1]),console.log(d.getRoom[b[1]]),e.emit("joinroom",{room:d.getRoom(b[1]),pass:""},function(){})):"/partroom"===b[0]||(console.log("I sent a message to "+a.roomName+": "+a.currentMessage),e.emit("sendmsg",{roomName:a.roomName,msg:a.currentMessage}),a.currentMessage=""))}},a.disconnect=function(){e&&(console.log(d.getUsername()+" Disconnected from server"),b.path("/"),e.disconnect())},a.keyPress=function(b){13===b.keyCode&&a.send()}}]);
>>>>>>> f10dd4ff9c865334eaba3aba635b80f70bf7988e
